<!DOCTYPE html>
<html>
<head>
    <title>TMDB Original Language - Test</title>
</head>
<body>
    <div id="testConfigPage" data-role="page" class="page type-interior pluginConfigurationPage">
        <div data-role="content">
            <div class="content-primary">
                <h1>Plugin Configuration Test Page</h1>
                <p><strong>✓ If you can see this page, the embedded resource is working!</strong></p>
                
                <div id="status" style="margin: 20px 0; padding: 15px; background: #f0f0f0; border-radius: 4px;">
                    <p>Loading...</p>
                </div>
                
                <h2>Next Steps:</h2>
                <ol>
                    <li>If this page loads successfully, replace with the full config.html</li>
                    <li>If this page doesn't load, there's an issue with embedded resources</li>
                    <li>Check the browser console (F12) for any JavaScript errors</li>
                </ol>
            </div>
        </div>
    </div>
    
    <script type="text/javascript">
        (function() {
            var pluginId = '2DE6B212-1C77-EFBC-8B95-A45F6DAE8921';
            var statusDiv = document.getElementById('status');
            
            statusDiv.innerHTML = 
                '<p><strong>Test Results:</strong></p>' +
                '<p>Plugin ID: ' + pluginId + '</p>' +
                '<p>Dashboard available: ' + (typeof Dashboard !== 'undefined' ? '✓ Yes' : '✗ No') + '</p>' +
                '<p>ApiClient available: ' + (typeof ApiClient !== 'undefined' ? '✓ Yes' : '✗ No') + '</p>';
            
            if (typeof ApiClient !== 'undefined' && typeof Dashboard !== 'undefined') {
                Dashboard.showLoadingMsg();
                
                ApiClient.getPluginConfiguration(pluginId)
                    .then(function(config) {
                        statusDiv.innerHTML += 
                            '<p style="color: green;"><strong>✓ Configuration loaded successfully!</strong></p>' +
                            '<p>Enabled: ' + config.Enabled + '</p>' +
                            '<p>TestMode: ' + config.TestMode + '</p>' +
                            '<p>DebugLogging: ' + config.DebugLogging + '</p>' +
                            '<p>TestPosterUrl: ' + (config.TestPosterUrl ? config.TestPosterUrl.substring(0, 50) + '...' : 'Not set') + '</p>';
                        Dashboard.hideLoadingMsg();
                    })
                    .catch(function(error) {
                        statusDiv.innerHTML += 
                            '<p style="color: red;"><strong>✗ Error loading configuration:</strong></p>' +
                            '<p>' + error.toString() + '</p>';
                        Dashboard.hideLoadingMsg();
                    });
            } else {
                statusDiv.innerHTML += '<p style="color: orange;"><strong>⚠ Emby API not available</strong></p>';
            }
        })();
    </script>
</body>
</html>